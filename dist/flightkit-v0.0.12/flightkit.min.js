!function(){"use strict";function i(e,t){if(!t||0===t.length)return e;const s=Object.assign([],e);if(Array.isArray(s[0])){e=s;var n=t;const r=[];for(const i of e)r.push(i.sort(T(n)));r}else s.sort(T(t));return s}function _(e){let t=e.toString();e=t.match(/^\d+|\d+$/);return e?parseInt(e[0]):null}function k(e){return"boolean"==typeof e||"string"==typeof e&&("true"===(e=e.toLocaleLowerCase())||"false"===e)}function L(e){return"boolean"==typeof e?e:"true"===e.toLocaleLowerCase()}function T(w,E=0){return function(d,h){var{propertyName:e,direction:t}=w[E];let s=null===d[e]||void 0===d[e]?"":d[e],n=null===h[e]||void 0===h[e]?"":h[e];const p=/^(\d{1,4}-\d{1,4}-\d{1,4}(T)?)/gim;var m,e=s instanceof Date&&n instanceof Date||p.test(s)&&p.test(n),u=(e&&(s=s instanceof Date?s.valueOf():new Date(Date.parse(s)),n=n instanceof Date?n.valueOf():new Date(Date.parse(n))),k(s)&&k(n)),g=!u&&!isNaN(s)&&!isNaN(n),r=_(s),i=_(n);let f=!1;g?(s=parseFloat(s).toPrecision(12),n=parseFloat(n).toPrecision(12)):null!==r&&null!==i&&(f=!0),u&&(s=L(s),n=L(n));let o,a;switch(t){case"descending":case"desc":o=n,a=s;break;default:o=s,a=n}let l=0;if(f)l=(r=s,i=n,t=t,c=/^([a-zA-Z]*)(\d*)|(\d*)([a-zA-Z]*)$/,r=r.toString().toLocaleLowerCase().match(c),i=i.toString().toLocaleLowerCase().match(c),c=r[1]||r[4],r=parseInt(r[2]||r[3],10)||0,y=i[1]||i[4],i=parseInt(i[2]||i[3],10)||0,(m=(t=t.includes("desc"))?y:c)<(c=t?c:y)?-1:c<m?1:(t?i:r)-(t?r:i));else if(u||e||g)l=o-a;else{o=o.toString().trim().toLowerCase(),a=a.toString().trim().toLowerCase();const v=/\d/gim;var y=v.test(s)&&v.test(n);l=y?o.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}):o.localeCompare(a)}var c=E+1;if(0===l&&c<w.length){const b=T(w,c);return b(d,h)}return l}}function a(e,t){t=t?t.toUpperCase():"FLK-";return e.toUpperCase().includes(t)}function h(e,t){var{timeStamp:s,type:n,x:r,y:i}=e;let o=e.target;do{if(!o||"HTML"===o.tagName||a(o.tagName,t)){"HTML"===o.tagName&&(o=null);break}}while(o=o.parentNode||o.parentElement,!a(o.tagName,t));return{target:o,timeStamp:s,type:n,x:r,y:i}}function p(e,t){let s=e.target,n="";for(;s.dataset[t]?n=s.dataset[t]:s=s.parentNode,!n;);return n}class r{constructor(){}_topLevelClasses=[];_events=[];generateId(){return"flk-"+function e(){const t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),s=t.split("-")[0];return window.$flightkitUUIDStore||(window.$flightkitUUIDStore=[]),window.$flightkitUUIDStore.some(e=>e===s)?e():(window.$flightkitUUIDStore.push(s),s)}()}render(t){if(!t.component)throw new Error("Component is not assigned! Can't render");t.id=t.id||this.generateId();var e=this._getAllEventAttributes(t);if(e){var s="#"+t.id;for(const i of e){var n="e-"+i;this.addEvent(s,i,t.getAttribute(n))}}var r=Object.keys(t.classList).length;if(r){for(let e=0;e<r;e++)this._topLevelClasses.push(t.classList[0]),t.classList.remove(t.classList[0]);t.removeAttribute("class")}this._topLevelClasses.length&&(Array.isArray(t.component)?t.component[0]:t.component).classList.add(...this._topLevelClasses),clearTimeout(this._renderTimer),this.renderTimeout=setTimeout(()=>{this._assignToDom(t,t.component),clearTimeout(this._renderTimer)},10)}addEvent(e,t,s){this._events.push({selector:e,eventType:t,callback:s})}_getExternalCallback(e){let t=void 0;for(const s of e.split("."))t=(t||window)[s];return t}_getAllEventAttributes(e){e=e.attributes;const t=Array.from(e).filter(e=>e.name.startsWith("e-"));return t.map(e=>e.name.slice(2))}_isFlightkitElement(e){return e.toUpperCase().includes("FLK-")}_outerEventHandler(e){const t=h(e),s=(t.contents=e.detail,t.target.getAttribute("e-"+t.type));let n=void 0;for(const r of s.split("."))n=(n||window)[r];return e.preventDefault(),e.stopPropagation(),n(t)}_addEvents(e){if(e.isConnected)for(const s of this._events)if(s.selector.startsWith("."))for(const n of document.querySelectorAll(s.selector))this._addEventToElement(s,n);else{var t=document.querySelector(s.selector);this._addEventToElement(s,t)}}_addEventToElement(e,t){t&&("function"==typeof e.callback?(t.removeEventListener(e.eventType,e.callback),t.addEventListener(e.eventType,e.callback)):(t.removeEventListener(e.eventType,this._outerEventHandler),t.addEventListener(e.eventType,this._outerEventHandler)))}removeEvents(){for(const t of this._events)if(t.selector.startsWith("."))for(const s of document.querySelectorAll(t.selector))this._addEventToElement(t,s);else{var e=document.querySelector(t.selector);this._addEventToElement(t,e)}this._events=[]}_removeEventToElement(e,t){t&&("function"==typeof e.callback?t.removeEventListener(e.eventType,e.callback):t.removeEventListener(e.eventType,this._outerEventHandler))}_assignToDom(e,t){e.innerHTML="";for(const n of Array.isArray(t)?t:[t])e.append(n);const s=setTimeout(()=>{this._addEvents(e),clearTimeout(s)},10)}}const m='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="gold" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="WhiteSmoke" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sheet"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="3" x2="21" y1="15" y2="15"/><line x1="9" x2="9" y1="9" y2="21"/><line x1="15" x2="15" y1="9" y2="21"/></svg>';function l(e){const t=new DOMParser;return t.parseFromString(e,"image/svg+xml").documentElement}class e extends HTMLElement{base;component=null;properties=new Set;uniqueEntriesByProperties={};propertyLabelDictionary={};_contents=[];_orderBy=[];_columnOrder=[];_filter="";_selectionProperty="";_selectedIds=new Set;_templates={};_templateClasses={};static get observedAttributes(){return["contents","columns","order","filter","selection-property","templates"]}get columnOrder(){return this._columnOrder.length?this._columnOrder:this.properties}set columnOrder(e){let t;"string"==typeof e&&(t=e.split(",")),t=e,this._columnOrder=t}get contents(){return this._contents}set contents(e){this.analyzeData(e),this._contents=e}get orderBy(){return this._orderBy}set orderBy(e){if(Array.isArray(e))this._orderBy=e;else{const n=[];for(const r of e.split(",")){var t=r.split("|"),s=t[0],t=1<t.length?t[1]:"asc";n.push({propertyName:s,direction:t})}this._orderBy=n}}get filter(){return this._filter}set filter(e){this._filter=e.toString()}constructor(){super(),this.base=new r,this.setContents(this.getAttribute("contents")),this.setTemplates(this.getAttribute("templates")),this.setColumnOrder(this.getAttribute("columns")),this.filter=this.getAttribute("filter")||"";var e=this.getAttribute("order"),e=(e&&(this.orderBy=e),this.getAttribute("selection-property")),e=(e&&(this._selectionProperty=e),this.getElementsByTagName("template"));if(e.length){const s={};for(const n of e){var t=n.getAttribute("name");s[t]=n.innerHTML,n.classList.length&&(this._templateClasses[t]=[...n.classList])}this.setTemplates(s)}}attributeChangedCallback(e,t,s){switch(e){case"contents":this.setContents(s);break;case"templates":this.setTemplates(s);break;case"order":this.orderBy=s;break;case"filter":this.filter=s||"";break;case"selection-property":this._selectionProperty=s;break;case"columns":this.setColumnOrder(s)}this.createHtml(),this.base.render(this)}_createElement(e){const t=document.createElement(e);return t.innerHTML=this._templates[e],this._templateClasses[e]&&t.classList.add(...this._templateClasses[e]),t}createHtml(){const e=document.createElement("table");let t=this.contents;this.orderBy.length&&(t=i(this.contents,this.orderBy));var s=this.createHead();e.append(s),this._templates.caption&&e.append(this._createElement("caption"));let n=[];if(this.filter.length)for(const r of t){let e=Object.values(r).join(" ").toLowerCase();e.includes(this.filter)&&n.push(r)}else n=t;s=this.createBody(n);e.append(s),this._templates.tfoot&&e.append(this._createElement("tfoot")),this.component=e}connectedCallback(){this.createHtml(),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this)}_updateCheckboxes(e){var t,s=e.querySelectorAll(".flk-selection-checkbox"),n=e._selectedIds.size,r=e.contents.execute().length,i=n!==r,o=n===r,a=0!==n;for(const l of s)l.dataset.objectId?(t=l.dataset.objectId,e._selectedIds.has(t)?l.checked=!0:l.checked=!1):a&&i?l.indeterminate=!0:a&&o?(l.indeterminate=!1,l.checked=!0):(l.indeterminate=!1,l.checked=!1)}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}emitSelectAll(e){var t=e.target.checked;const s=h(e).target;s._selectedIds=t?new Set(s.contents.execute().map(e=>e[s._selectionProperty])):new Set;e=t?s.contents.execute():[];s._emit("select",s,{selection:e}),s._updateCheckboxes(s)}emitSelect(e){var t=e.target.checked,s=e.target.dataset.objectId;const n=h(e).target,r=(t?n._selectedIds.add(s):n._selectedIds.delete(s),n._selectionProperty);e=n.contents.execute().filter(e=>n._selectedIds.has(e[r]));n._emit("select",n,{selection:e}),n._updateCheckboxes(n)}sortData(e){const t=h(e).target,s=p(e,"column");s&&(-1<(e=t._orderBy.findIndex(e=>e.propertyName===s))?"asc"===t._orderBy[e].direction?t._orderBy[e].direction="desc":t._orderBy.splice(e,1):t._orderBy.push({propertyName:s,direction:"asc"}),t.createHtml(),t.base.render(t))}setColumnOrder(e){this._columnOrder=e?Array.isArray(e)?e:e.split(","):[]}analyzeData(t){this.properties=new Set;var s=t.length;for(let e=0;e<s;e++)for(const n of Object.keys(t[e]))this.properties.add(n),this.uniqueEntriesByProperties[n]||(this.uniqueEntriesByProperties[n]=new Set),this.uniqueEntriesByProperties[n].add(t[e][n])}setTemplates(e){if(e)try{switch(typeof e){case"string":this._templates=JSON.parse(e)||[];break;case"object":this._templates=e}}catch(e){console.log(e)}}setContents(e){var t=e||this.contents||[];try{switch(typeof t){case"string":this.contents=JSON.parse(t)||[];break;case"object":Array.isArray(t)?this.contents=t:this.contents=[t]}}catch(e){console.log(e)}}convertJsonKeyToTitle(e){if("string"!=typeof e&&(e=e.toString()),this.propertyLabelDictionary[e])return this.propertyLabelDictionary[e];const t=e.replace(/([A-Z_])/g,e=>"_"===e?" ":" "+e.toLowerCase()).trim();var s=t.charAt(0).toUpperCase()+t.slice(1);return this.propertyLabelDictionary[e]=s}parseTemplate(e,n){return e.replace(/\{\{([\s\S]+?)\}\}/gim,(e,t)=>{let s="";t=t.trim();t=n[t];return t&&(s=t),Array.isArray(s)?s.join(", "):s.toString().trim()})}createSelectionCheckbox(e){const t=document.createElement("input");return t.setAttribute("type","checkbox"),t.classList.add("flk-selection-checkbox"),e&&(t.dataset.selected=e[this._selectionProperty]),t}createRow(e){const t=document.createElement("tr");if(this._selectionProperty.length){const r=document.createElement("td");var s=this.base.generateId();const i=this.createSelectionCheckbox(e);i.id=s,i.dataset.objectId=e[this._selectionProperty];var n=e[this._selectionProperty];this._selectedIds.has(n)?i.checked=!0:i.checked=!1,this.base.addEvent("#"+s,"change",this.emitSelect),r.append(i),t.append(r)}for(const o of this.columnOrder){const a=document.createElement("td");this._templates[o]?(a.innerHTML=this.parseTemplate(this._templates[o],e),this._templateClasses[o]&&a.classList.add(...this._templateClasses[o])):a.innerText=e[o],t.append(a)}return t}createBody(e){const t=document.createElement("tbody");for(const n of e){var s=this.createRow(n,null);t.append(s)}return t}createHead(){const e=document.createElement("thead"),t=document.createElement("tr");if(t.classList.add("cursor-pointer"),this._selectionProperty.length){const r=document.createElement("th");var s=this.base.generateId();const i=this.createSelectionCheckbox();i.id=s;var d=this.contents.execute().length;0<this._selectedIds.size&&this._selectedIds.size<d?i.indeterminate=!0:this._selectedIds.size===d&&(i.checked=!0),this.base.addEvent("#"+s,"change",this.emitSelectAll),r.append(i),t.append(r)}for(const o of this.columnOrder){var n=this.base.generateId();const a=document.createElement("th"),l=(a.id=n,a.dataset.column=o,document.createElement("span"));l.innerText=this.convertJsonKeyToTitle(o),a.append(l),this.base.addEvent("#"+n,"click",this.sortData);n=this.orderBy.find(e=>e.propertyName===o);const c=document.createElement("span");n?c.innerHTML="asc"===n.direction?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-narrow-wide"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M11 12h4"/><path d="M11 16h7"/><path d="M11 20h10"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-wide-narrow"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><path d="M11 4h10"/><path d="M11 8h7"/><path d="M11 12h4"/></svg>':(c.style.display="inline-block",c.style.width="24px"),a.append(c),t.append(a)}return e.append(t),e}addEvent(e,t,s){this.base.addEvent(e,t,s)}init(){this.createHtml(),this.base.render(this)}}class t extends HTMLElement{base;componentId;constructor(){super(),this.base=new r}connectedCallback(){var e=this.getAttribute("top"),t=this.getAttribute("left"),s=this.getAttribute("center"),n=this.getAttribute("zIndex");this.id||(this.id=this.base.generateId()),this.style.display="block",this.style.position="fixed","string"==typeof s?(this.style.top=e||"50%",this.style.left="50%",this.style.transform="translate(-50%, -50%)"):(this.style.top=e||this.clientTop+"px",this.style.left=t||this.clientLeft+"px"),n&&(this.style.zIndex=n),this.componentId=this.getAttribute("handle");const r=document.createElement("div");r.innerHTML=this.innerHTML,this.component=r;s="#"+(this.componentId||this.id);this.base.addEvent(s,"mousedown",this._dragElement),this.base.addEvent(s,"mouseup",this._reset),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this)}_dragElement(e){const s=h(e,"flk-draggable").target;let n,r;function t(e){n=e.clientX-s.offsetLeft,r=e.clientY-s.offsetTop}function i(e){var t=e.clientX-n,e=e.clientY-r;s.style.left=t+"px",s.style.top=e+"px"}function o(e){e.preventDefault()}function a(){s.removeAttribute("draggable"),s.removeEventListener("dragstart",t),s.removeEventListener("dragend",a),document.removeEventListener("dragover",o),document.removeEventListener("drop",i)}s.setAttribute("draggable",!0),s.addEventListener("dragstart",t),s.addEventListener("dragend",a),document.addEventListener("dragover",o),document.addEventListener("drop",i)}}class s extends HTMLElement{_id;base;_draggableId;constructor(){super(),this.base=new r}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}_closeModal(e){e.stopPropagation();const t=h(e,"flk-modal").target;t.classList.add("hidden")}closeModal(e){this.classList.add("hidden")}openModal(e=!0){const t=document.getElementById(this._draggableId);e&&(t.style.top="40%",t.style.left="50%"),this.classList.remove("hidden")}connectedCallback(){this.id||(this.id=this.base.generateId());const e=document.createElement("div");var t=this.base.generateId();const s=document.createElement("flk-draggable"),n=(this._draggableId=this.base.generateId(),s.id=this._draggableId,s.setAttribute("center",""),s.setAttribute("top","40%"),s.setAttribute("handle",t),s.setAttribute("zIndex","1080"),s.classList.add("border","shadow-lg","bg-white"),s.style.width="max-content",document.createElement("div"));var r=this.getAttribute("modal-title");if(r){const c=document.createElement("span");c.innerText=r,c.classList.add("ml-1","mr-auto"),n.append(c)}n.id=t;const i=this.getAttribute("header-class");let o=[];i?o=o.concat(i.split(" ")):o.push("bg-gray-light"),n.classList.add(...o,"border-bottom","row","justify-end","cursor-no-select");r=this.base.generateId();const a=document.createElement("button"),l=(a.classList.add("py-0","px-1","outline-hover","no-border","cursor-default",...o),a.innerText="X",a.id=r,n.append(a),s.append(n),document.createElement("div"));l.innerHTML=this.innerHTML,s.append(l),e.append(s),this.component=e,this.base.addEvent("#"+r,"click",this._closeModal),this.base.render(this),this.classList.add("hidden")}disconnectedCallback(){this.base.removeEvents(this)}}class n extends HTMLElement{base;_buttonId;_drawerId;_iconId;constructor(){super(),this.base=new r}connectedCallback(){this.style.position="relative",this.style.display="flex",this.style.width="fit-content",this._buttonId=this.base.generateId();const e=document.createElement("button"),t=(e.setAttribute("type","button"),e.classList.add("row"),e.id=this._buttonId,document.createElement("span")),s=(t.classList.add("self-align-center"),t.innerText=this.getAttribute("text"),this._iconId=this.base.generateId(),document.createElement("span"));s.classList.add("self-align-center");var n=l('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>');const r=l('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up"><path d="m18 15-6-6-6 6"/></svg>'),i=(r.classList.add("hidden"),s.append(n,r),s.id=this._iconId,e.append(t,s),this._drawerId=this.base.generateId(),document.createElement("div"));i.id=this._drawerId,i.classList.add("shadow","inline-block","bg-white"),i.style.position="absolute",i.style.zIndex="1040";n=this.querySelector("template");n.innerHTML.length?i.innerHTML=n.innerHTML:i.append(n.firstChild),i.style.display="none",this.component=[e,i],this.base.addEvent("#"+this._buttonId,"click",this.toggleMenu);const o=document.querySelector("body");""!==o.getAttribute("flk-close-dropdown")&&(o.setAttribute("flk-close-dropdown",""),o.addEventListener("click",this.closeAllDropdownButtons)),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this);var e=document.querySelectorAll("flk-dropdown");if(!e||!e.length){const t=document.querySelector("body");t.removeAttribute("flk-close-dropdown"),t.removeEventListener("click",this.closeAllDropdownButtons)}}toggleMenu(e){const t=h(e).target;e=t._drawerId;const s=document.getElementById(e);var e="none"!==s.style.display,n=(s.style.display=e?"none":"block",t.getAttribute("drawer-width")),n=("string"==typeof t.getAttribute("right")&&(s.style.right="0px"),s.style.top=t.offsetHeight+"px",s.style.width=n||t.offsetWidth+"px",t._iconId);const r=document.getElementById(n);e?(r.childNodes[0].classList.remove("hidden"),r.childNodes[1].classList.add("hidden")):(r.childNodes[0].classList.add("hidden"),r.childNodes[1].classList.remove("hidden"))}_closeDropdown(){var e=this._drawerId;const t=document.getElementById(e);if("none"!==t.style.display){e=this._iconId;const s=document.getElementById(e);t.style.display="none",s.childNodes[0].classList.remove("hidden"),s.childNodes[1].classList.add("hidden")}}closeAllDropdownButtons(e){var t,s=h(e,"flk-dropdown").target,e=document.querySelectorAll("flk-dropdown");if(s)for(const n of e)s._buttonId!==n._buttonId&&(t=n._drawerId,"none"!==document.getElementById(t).style.display&&n._closeDropdown());else for(const r of e)r._closeDropdown()}}class o extends HTMLElement{base;contents;component;listType="ul";commentType="";searchStyle="";iconSet;filter={value:"",caseSensitive:!1};selectedElements=[];static get observedAttributes(){return["contents","icon-set","max-depth","filter","search-style","comment"]}_jsonToValueArray(e){let t=JSON.stringify(e);t=t.replace(/[\[\]{}\"]/g,"");let s=[];for(const n of t.split(","))s=s.concat(n.split(":"));return[...new Set(s)]}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}constructor(){super(),this.base=new r,this.setContents(this.getAttribute("contents")),this.commentType=this.getAttribute("comment")??"",this.iconSet=this.getAttribute("icon-set")??"file",this.searchStyle=this.getAttribute("search-style")??"highlight",this.maxDepth=this.getAttribute("max-depth")?parseInt(this.getAttribute("max-depth")):-1,this.setFilter(this.getAttribute("filter")),this.style.display="block",this.style.maxWidth="fit-content",this.style.margin="0 1rem 0 0",this.base.addEvent(".flk-branch","click",this.emitNodeToggle)}deselectTree(){if(this.selectedElements.length)for(const e of this.selectedElements)e.classList.remove("font-weight-bold"),delete e.dataset.selected}emitNodeToggle(e){if(e.stopPropagation(),["LI","UL"].includes(e.target.tagName))return!1;const t=h(e,"flk-tree-nav").target,s=p(e,"branchKey");let n=t.contents;const r=s.split(".");for(const a of r)if(n[a])n=n[a];else if(null===n[a])n=null;else{let e=[];for(const l of n)l[a]&&e.push(l[a]);n=e}let i,o=e.target;for(;o.dataset&&o.dataset.leafKey?i=o.dataset.leafKey:o=o.parentNode||o.parentElement,!i;);t.selectedElements.length&&t.deselectTree(),t.selectedElements=[],"DETAILS"===o.tagName?(t.selectedElements.push(o.childNodes[0]),o.childNodes.length&&o.childNodes[0].childNodes.length&&"DIV"===o.childNodes[0].childNodes[0].tagName&&(console.log(o.childNodes[0].childNodes),t.selectedElements=o.childNodes[0].childNodes[0].childNodes)):t.selectedElements.push(o);for(const c of t.selectedElements)c.dataset.selected||(c.classList.add("font-weight-bold"),c.dataset.selected=!0);var e=s.substring(s.indexOf(".")+1),d=t.createLeafText(r.reverse()[0]);t._emit("tree-click",t,{path:e,data:n,key:i,label:(d.titleText+" "+d.commentText).trim(),branch:"object"==typeof n})}convertJsonKeyToTitle(e){if(!e)return"";const t=(e="string"!=typeof e?e.toString():e).replace(/([A-Z_])/g,e=>"_"===e?" ":" "+e).trim();return t.charAt(0).toUpperCase()+t.slice(1)}setContents(e){var t=e||this.contents||[];try{switch(typeof t){case"string":this.contents=JSON.parse(t);break;case"object":Array.isArray(t)?this.contents=t:this.contents=[t]}}catch(e){console.log(e)}}applyFilter(e){let t,s;var n="details"===e.tagName.toLowerCase();let r=e.dataset.branchValues.split(","),i=(r.shift(),r.join());s=this.filter.caseSensitive?(t=e.dataset.branchValues.includes(this.filter.value),i.includes(this.filter.value)):(t=e.dataset.branchValues.toLowerCase().includes(this.filter.value.toLowerCase()),i.toLowerCase().includes(this.filter.value.toLowerCase())),t?this.unselectTree(e):"highlight"===this.searchStyle?e.parentElement.style.opacity="50%":e.parentElement.classList.add("hidden"),n&&t&&s?e.setAttribute("open",""):e.removeAttribute("open")}resetTree(e=!0){for(const t of this.querySelectorAll("[data-branch-values]"))t.parentElement.style.opacity="",t.parentElement.classList.remove("hidden"),e&&t.removeAttribute("open")}unselectTree(e){"highlight"===this.searchStyle?e.parentElement.style.opacity="":e.parentElement.classList.remove("hidden"),e.removeAttribute("open")}clearFilter(){this.resetTree(!1),this.filter={value:"",caseSensitive:!1}}filterTree(){let t=setTimeout(()=>{for(const e of this.querySelectorAll("[data-branch-values]"))void 0===this.filter.value||0===this.filter.value.length?this.unselectTree(e):this.applyFilter(e);clearTimeout(t)},10)}setFilter(e){const t=e||{};try{switch(typeof t){case"string":t.includes("{")?(this.filter=JSON.parse(t),!1===this.filter.caseSensitive&&(this.filter.value=this.filter.value.toLowerCase())):this.filter.value=e.toLowerCase();break;case"object":this.filter=t}}catch(e){console.log(e)}this.filterTree()}createLeafText(e){var t;let s="",n="";return!("string"!=typeof e||!this.commentType.length)&&e.includes(this.commentType[0])?(t=e.indexOf(this.commentType[0]),s=this.convertJsonKeyToTitle(e.substring(0,t)),n=e.substring(t+1,e.length-1).trim()):s=this.convertJsonKeyToTitle(e),{titleText:s,commentText:n}}createTextTag(n,r){n=this.createLeafText(n);if(n.commentText){let e=document.createElement("div"),t=document.createElement("span"),s=(t.innerText=n.titleText,document.createElement("small"));s.innerText=n.commentText,s.style.marginLeft="1rem",e.append(t,s),e.style.display="inline-flex",e.style.alignItems="center",r.append(e)}else r.innerText=n.titleText}createLeaf(e,t,s,n=[]){let r=document.createElement("li");r.classList.add("cursor-no-select"),r.style.marginTop="0.4rem",r.dataset.branchKey=s;const i="file"===this.iconSet?'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>';r.style.listStyleImage=`url('data:image/svg+xml,${i}')`,r.style.position="relative",r.style.left="2px";let o=document.createElement("span");s=[e].concat(n);if(o.dataset.branchValues=[...new Set(s)].join(),o.dataset.leafKey=s[0],this.createTextTag(e,o),o.style.position="relative",o.style.top="-3px",r.append(o),t.tagName.toLowerCase()!==this.listType){let e=document.createElement(this.listType);const i="file"===this.iconSet?m:u;e.style.listStyleImage=`url('data:image/svg+xml,${i}')`,e.append(r),t.append(e)}else t.append(r)}createBranch(s,t,n,r){if(r===this.maxDepth&&"object"==typeof s)for(const o of Array.isArray(s)?s:Object.keys(s)){let e;s[o]&&(e=this._jsonToValueArray(s[o])),this.createLeaf(o,t,n+"."+o,e)}else if(Array.isArray(s))for(var e in s){var d=document.createElement(this.listType);t.append(this.createBranch(s[e],d,n+"."+e,r+1))}else if(null!==s&&"object"==typeof s){const a=[];for(const l of Object.keys(s)){let e=document.createElement("li"),t=(e.classList.add("cursor-no-select"),e.style.position="relative",e.style.left="2px",e.dataset.branchKey=n+"."+l,document.createElement("details"));t.classList.add("flk-branch"),t.dataset.branchValues=[l].concat(this._jsonToValueArray(s[l])),t.style.position="relative",t.style.top="-3px",t.classList.add("cursor-default");var i=document.createElement("summary");this.createTextTag(l,i),t.dataset.leafKey=l,t.append(i),e.append(this.createBranch(s[l],t,n+"."+l,r+1)),a.push(e)}if(t.tagName.toLowerCase()!==this.listType){let e=document.createElement(this.listType);var h="file"===this.iconSet?m:u;e.style.listStyleImage=`url('data:image/svg+xml,${h}')`;for(const c of a)e.append(c);t.append(e)}else for(const p of a)t.append(p)}else this.createLeaf(s,t,n);return t}createHtml(){let e=document.createElement(this.listType);var t="file"===this.iconSet?m:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="silver" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-database"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="m 3,12 a 9,3 0 0 0 18,0 M 3,5 v 14 a 9,3 0 0 0 18,0 V 5 m 0,0 A 9,3 0 0 1 12,8 9,3 0 0 1 3,5 9,3 0 0 1 12,2 9,3 0 0 1 21,5 Z" /></svg>';if(e.style.listStyleImage=`url('data:image/svg+xml,${t}')`,e.style.marginLeft="3rem",this.contents.length){for(const s in this.contents)e=this.createBranch(this.contents[s],e,s,0);this.component=e}else this.component=e}attributeChangedCallback(e,t,s){switch(e){case"contents":this.setContents(s);break;case"icon-set":this.iconSet=s;break;case"max-depth":this.maxDepth="string"==typeof s?parseInt(s):s;break;case"comment":this.commentType=s;break;case"search-style":this.searchStyle=s;break;case"filter":this.setFilter(s)}this.init()}connectedCallback(){this.init()}disconnectedCallback(){this.base.removeEvents(this)}init(){this.createHtml(),this.base.render(this)}}customElements.define("flk-table",e),customElements.define("flk-draggable",t),customElements.define("flk-modal",s),customElements.define("flk-dropdown",n),customElements.define("flk-tree-nav",o)}();
!function(){"use strict";var a,c,g,e;(e=a=a||{}).Date="date",e.String="string",e.Float="float",e.Number="number",e.Array="array",e.Object="object",e.Bool="bool",e.Currency="currency",e.Undefined="undefined",e.Null="null";const l={date:/^(\d{1,4}-\d{1,4}-\d{1,4}(T)?)/gim,currency:/^[$|€]\s?[0-9]*(\.|,)?\d*(\.|,)?\d*/gim,float:/\d+[,|.]\d+[,|.]?\d*/gim,currencySign:/\$|€/gim,array:/^\s?[[].[^,]+[\]],?/gi,precision:/[-+$€,.]/gm,string:/[a-zA-Z]/gim},h=e=>{return null===e||"null"===e?a.Null:e||0===e||!1===e?null===new RegExp(l.date).exec(e)||isNaN(Date.parse(e))?new RegExp(l.currency).exec(e)?a.Currency:!new RegExp(l.string).exec(e)&&new RegExp(l.float).exec(e.toString())?a.Float:isNaN(e)&&0!==e?Array.isArray(e)?a.Array:"object"==typeof e?a.Object:a.String:a.Number:a.Date:a.Undefined},u=(t,e)=>{const s={value:void 0,type:e=e||h(t),currencySign:""};switch(s.type){case a.String:s.value=t.toString();break;case a.Float:case a.Currency:var r=(t=t.toString()).match(new RegExp(/(,)/gim)),n=t.match(new RegExp(/(\.)/gim));if(r)for(let e=1;e<=r.length;e++)t=e!==r.length||n?t.replace(",",""):t.replace(",",".");if(s.type===a.Currency){const o=new RegExp(l.currencySign);var i=o.exec(t);s.currencySign=null!==i?i[0]:"",t=t.replace(o,"")}s.value=parseFloat(t).toPrecision(12);break;case a.Number:s.value=Number(t);break;case a.Date:s.value=Date.parse(t);break;case a.Array:t.length?"object"==typeof t[0]?s.value=t.map(e=>JSON.stringify(e)).join(", "):s.value=t.join(", "):s.value="";break;case a.Object:s.value=t;break;case a.Undefined:s.value="";break;case a.Null:s.value=null}return s};function b(e,t){var s;let r;for(s of e.split("."))s=s.trim(),r?"object"!=typeof r||Array.isArray(r)||(r=r[s]):r=t[s];return r}const p=(e,t)=>t<e,m=(e,t)=>e<t,f=(e,t)=>t<=e,w=(e,t)=>e<=t,k=(e,t,s)=>s?e.toLowerCase()==t.toLowerCase():e==t,E=(e,t)=>e===t,_=(e,t)=>e!=t,x=(e,t)=>e!==t,A=(e,t)=>null!=t&&"string"==typeof e&&0<=e.toLowerCase().indexOf(t.toString().toLowerCase()),L=(e,t)=>null!=t&&0<=e.toString().toLowerCase().indexOf(t.toString().toLowerCase()),T=(e,t)=>null!=t&&"string"==typeof e&&e.toLowerCase().indexOf(t.toString().toLowerCase())<0;function t(s,r){if(0===r.length)return s;{var n=s;const o=[],a=[];let e=[];for(const l of r)l.type&&l.type!==c.And?(e.length&&a.push(e),e=[l]):e.push(l);a.push(e);let t=[];for(const e of a)t=t.concat(C(n,e));t=[...new Set(t)];var i=n.length;for(let e=0;e<i;e++)t.includes(e)&&o.push(n[e]);return o}}(e=c=c||{}).And="and",e.Or="or";const C=function(e,t){const s=[];if(!e)return s;for(var[r,n]of e.entries()){let e=!0;for(const a of t){var i=b(a.propertyName,n),i=u(i).value,o=u(a.value).value;const l=function(e){switch(e.toLowerCase()){case">":return p;case"<":return m;case">=":return f;case"<=":return w;case"is":case"==":return k;case"!is":case"!=":return _;case"===":return E;case"!==":return x;case"like":case"~":case"contains":return A;case"!contains":case"!like":case"!~":return T;default:return L}}(a.operator);if(!l(i,o,a.ignoreCase)){e=!1;break}}e&&s.push(r)}return s};function s(e,t){if(!t||0===t.length)return e;if(1<t.length){var n=e;var i=t;let s=[],r=[];return i.forEach(e=>{if(0===s.length)s=s.concat(o(n,e));else{for(const t of s)r=r.concat(o(t,e));s=r,r=[]}}),s}return o(e,t[0])}function o(e,t){const s=[],r=[];do{if(!e||0===e.length)break;var n=e.shift();if(!n)break;const o=n[t];var i=r.indexOf(o.toString());0<=i?s[i].push(n):(r.push(o.toString()),void 0!==s[r.length-1]?s[r.length-1].push(n):s.push([n]))}while(0<e.length);return s}function r(e,t){if(!t||0===t.length)return e;const s=Object.assign([],e);if(Array.isArray(s[0])){e=s;var r=t;const n=[];for(const i of e)n.push(i.sort(y(r)));n}else s.sort(y(t));return s}(e=g=g||{}).ascending="asc",e.descending="desc";function y(m,f=0){return function(e,d){var{propertyName:t,direction:s}=m[f];let r=e[t]||"",n=d[t]||"";const h=/^(\d{1,4}-\d{1,4}-\d{1,4}(T)?)/gim;var t=r instanceof Date&&n instanceof Date||h.test(r)&&h.test(n),u=(t&&(r=r instanceof Date?r.valueOf():new Date(Date.parse(r)),n=n instanceof Date?n.valueOf():new Date(Date.parse(n))),!isNaN(r)&&!isNaN(n)),i=(u&&(r=parseFloat(r).toPrecision(12),n=parseFloat(n).toPrecision(12)),!("true"!==r&&"false"!==r||"true"!==n&&"false"!==n));i&&(r="true"===r,n="true"===n);let o,a,l=(a=s===g.descending?(o=n,r):(o=r,n),0);if(i||t||u)l=o-a;else{o=o.toString().trim().toLowerCase(),a=a.toString().trim().toLowerCase();const c=/\d/gim;s=c.test(r)&&c.test(n);l=s?o.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}):o.localeCompare(a)}i=f+1;if(0===l&&i<m.length){const p=y(m,i);return p(e,d)}return l}}const i=(e,t)=>{if(t){var s=e;const r={};for(const n of t){let e=s.map(e=>e[n].toString());const i=e.map(e=>h(e));i.some(e=>e===a.Float)?(e=e.map(e=>parseFloat(e)),r[n]=parseFloat(e.reduce((e,t)=>e+t).toFixed(2))):(e=e.map(e=>parseInt(e)),r[n]=e.reduce((e,t)=>e+t))}return r}return{}};class S{model;sortDetails=[];filterDetails=[];selection=[];groupByProperties=[];distinctProperties=[];concatenationToken=", ";constructor(e){this.model=JSON.parse(JSON.stringify(e))}sort(e){return this.sortDetails=e,this}orderBy(e,t){return this.sortDetails.push({propertyName:e,direction:t}),this}thenOrderBy(e,t){return this.orderBy(e,t)}filter(e){return Array.isArray(e)?this.filterDetails=e:this.filterDetails.push(e),this}where(e,t,s,r,n){return this.filterDetails.push({propertyName:e,operator:t,value:s,type:r,ignoreCase:n}),this}andWhere(e,t,s,r){return this.where(e,t,s,c.And,r),this}orWhere(e,t,s,r){return this.where(e,t,s,c.Or,r),this}group(e){return this.groupByProperties=e,this}groupBy(e){return this.groupByProperties.push(e),this}thenGroupBy(e){return this.groupByProperties.push(e),this}select(e){return Array.isArray(e)?this.selection=e:"*"!==e&&(this.selection=[e]),this}distinct(e,t){return t&&(this.concatenationToken=t),Array.isArray(e)?this.distinctProperties=e:e&&(this.distinctProperties=[e]),this}execute(){return s(function(t,s){if(0===s.length)return t;{var r=s;let e=[];for(const n of t){const i={};for(const o of r)i[o]=n[o];e.push(i)}return e}}(function(s,r,d){if(!r||!r.length)return s;const n=[],h=[];for(const m of s){const o={};let t="";for(const e of r){var u=b(e,m);o[e]=u,t+=u}if(!h.includes(t)){let e=s;for(const a of Object.keys(o))e=e.filter(e=>e[a]===o[a]);h.push(t),n.push(e)}}const t=[];for(const f of n){let e={};for(const l of f){var i,p=Object.keys(e);if(p.length)for(const c of p)r.includes(c)||(i=e[c],Array.isArray(i)?(i=l[c],Array.isArray(i)?e[c]=[...new Set(...e[c].concat(l[c]))]:e[c].includes(l[c])||e[c].push(l[c])):isNaN(e[c])&&isNaN(l[c])?e[c]!==l[c]&&(e[c]=[e[c],l[c]]):e[c]=e[c]+l[c]);else e=l}t.push(e)}return t.forEach(e=>{for(const t in e)Array.isArray(e[t])&&(e[t]=e[t].join(d))}),t}(r(t(JSON.parse(JSON.stringify(this.model)),this.filterDetails),this.sortDetails),this.distinctProperties,this.concatenationToken),this.selection),this.groupByProperties)}sum(e,t){e=Array.isArray(e)?e:[e];return i(t||this.model,e)}}function I(e,t){t=t?t.toUpperCase():"FLK-";return e.toUpperCase().includes(t)}function d(e,t){var{timeStamp:s,type:r,x:n,y:i}=e;let o=e.target;do{if(!o||"HTML"===o.tagName||I(o.tagName,t)){"HTML"===o.tagName&&(o=null);break}}while(o=o.parentNode||o.parentElement,!I(o.tagName,t));return{target:o,timeStamp:s,type:r,x:n,y:i}}function B(e,t){let s=e.target,r="";for(;s.dataset[t]?r=s.dataset[t]:s=s.parentNode,!r;);return r}class n{constructor(){}_topLevelClasses=[];_events=[];generateId(){return"flk-"+function e(){const t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),s=t.split("-")[0];return window.$flightkitUUIDStore||(window.$flightkitUUIDStore=[]),window.$flightkitUUIDStore.some(e=>e===s)?e():(window.$flightkitUUIDStore.push(s),s)}()}render(t){if(!t.component)throw new Error("Component is not assigned! Can't render");t.id=t.id||this.generateId();var e=this._getAllEventAttributes(t);if(e){var s="#"+t.id;for(const i of e){var r="e-"+i;this.addEvent(s,i,t.getAttribute(r))}}var n=Object.keys(t.classList).length;if(n){for(let e=0;e<n;e++)this._topLevelClasses.push(t.classList[0]),t.classList.remove(t.classList[0]);t.removeAttribute("class")}this._topLevelClasses.length&&(Array.isArray(t.component)?t.component[0]:t.component).classList.add(...this._topLevelClasses),clearTimeout(this._renderTimer),console.log(t.component),this.renderTimeout=setTimeout(()=>{this._assignToDom(t,t.component),clearTimeout(this._renderTimer)},10)}addEvent(e,t,s){this._events.push({selector:e,eventType:t,callback:s})}_getExternalCallback(e){let t=void 0;for(const s of e.split("."))t=(t||window)[s];return t}_getAllEventAttributes(e){e=e.attributes;const t=Array.from(e).filter(e=>e.name.startsWith("e-"));return t.map(e=>e.name.slice(2))}_isFlightkitElement(e){return e.toUpperCase().includes("FLK-")}_outerEventHandler(e){const t=d(e),s=(t.contents=e.detail,t.target.getAttribute("e-"+t.type));let r=void 0;for(const n of s.split("."))r=(r||window)[n];return e.preventDefault(),e.stopPropagation(),r(t)}_addEvents(e){if(e.isConnected)for(const s of this._events)if(s.selector.startsWith("."))for(const r of document.querySelectorAll(s.selector))this._addEventToElement(s,r);else{var t=document.querySelector(s.selector);this._addEventToElement(s,t)}}_addEventToElement(e,t){t&&("function"==typeof e.callback?(t.removeEventListener(e.eventType,e.callback),t.addEventListener(e.eventType,e.callback)):(t.removeEventListener(e.eventType,this._outerEventHandler),t.addEventListener(e.eventType,this._outerEventHandler)))}removeEvents(){for(const t of this._events)if(t.selector.startsWith("."))for(const s of document.querySelectorAll(t.selector))this._addEventToElement(t,s);else{var e=document.querySelector(t.selector);this._addEventToElement(t,e)}this._events=[]}_removeEventToElement(e,t){t&&("function"==typeof e.callback?t.removeEventListener(e.eventType,e.callback):t.removeEventListener(e.eventType,this._outerEventHandler))}_assignToDom(e,t){e.innerHTML="";for(const r of Array.isArray(t)?t:[t])e.append(r);const s=setTimeout(()=>{this._addEvents(e),clearTimeout(s)},10)}}const v='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="gold" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>',N='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="WhiteSmoke" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sheet"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="3" x2="21" y1="15" y2="15"/><line x1="9" x2="9" y1="9" y2="21"/><line x1="15" x2="15" y1="9" y2="21"/></svg>';function D(e){const t=new DOMParser;return t.parseFromString(e,"image/svg+xml").documentElement}class O extends HTMLElement{base;component=null;_contents=[];_orderBy=[];properties=new Set;_columnOrder=[];_filter="";_selectionProperty="";_selectedIds=new Set;uniqueEntriesByProperties={};propertyLabelDictionary={};_templates={};_templateClasses={};static get observedAttributes(){return["contents","columns","order","filter","selection-property","templates"]}get columnOrder(){return this._columnOrder.length?this._columnOrder:this.properties}set columnOrder(e){let t;"string"==typeof e&&(t=e.split(",")),t=e,this._columnOrder=t}get contents(){return this._contents}set contents(e){this.analyzeData(e),this._contents=new S(e)}get orderBy(){return this._orderBy}set orderBy(e){if(Array.isArray(e))this._orderBy=e;else{const r=[];for(const n of e.split(",")){var t=n.split("|"),s=t[0],t=1<t.length?t[1]:"asc";r.push({propertyName:s,direction:t})}this._orderBy=r}}get filter(){return this._filter}set filter(e){this._filter=e.toString()}constructor(){super(),this.base=new n,this.setContents(this.getAttribute("contents")),this.setTemplates(this.getAttribute("templates")),this.setColumnOrder(this.getAttribute("columns")),this.filter=this.getAttribute("filter")||"";var e=this.getAttribute("order"),e=(e&&(this.orderBy=e),this.getAttribute("selection-property")),e=(e&&(this._selectionProperty=e),this.getElementsByTagName("template"));if(e.length){const s={};for(const r of e){var t=r.getAttribute("name");s[t]=r.innerHTML,r.classList.length&&(this._templateClasses[t]=[...r.classList])}this.setTemplates(s)}}attributeChangedCallback(e,t,s){switch(e){case"contents":this.setContents(s);break;case"templates":this.setTemplates(s);break;case"order":this.orderBy=s;break;case"filter":this.filter=s||"";break;case"selection-property":this._selectionProperty=s;break;case"columns":this.setColumnOrder(s)}this.createHtml(),this.base.render(this)}_createElement(e){const t=document.createElement(e);return t.innerHTML=this._templates[e],this._templateClasses[e]&&t.classList.add(...this._templateClasses[e]),t}createHtml(){const e=document.createElement("table");if(this.orderBy.length?this.contents.sort(this.orderBy):this.contents.sort([]),this.filter.length){const s=[];for(const r of this.columnOrder)s.push({propertyName:r,value:this.filter,operator:"like",type:"or",ignoreCase:!0});this.contents.filter(s)}else this.contents.filter([]);var t=this.createHead(),t=(e.append(t),this._templates.caption&&e.append(this._createElement("caption")),this.contents.execute()),t=this.createBody(t);e.append(t),this._templates.tfoot&&e.append(this._createElement("tfoot")),this.component=e}connectedCallback(){this.createHtml(),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this)}_updateCheckboxes(e){var t,s=e.querySelectorAll(".flk-selection-checkbox"),r=e._selectedIds.size,n=e.contents.execute().length,i=r!==n,o=r===n,a=0!==r;for(const l of s)l.dataset.objectId?(t=l.dataset.objectId,e._selectedIds.has(t)?l.checked=!0:l.checked=!1):a&&i?l.indeterminate=!0:a&&o?(l.indeterminate=!1,l.checked=!0):(l.indeterminate=!1,l.checked=!1)}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}emitSelectAll(e){var t=e.target.checked;const s=d(e).target;s._selectedIds=t?new Set(s.contents.execute().map(e=>e[s._selectionProperty])):new Set;e=t?s.contents.execute():[];s._emit("select",s,{selection:e}),s._updateCheckboxes(s)}emitSelect(e){var t=e.target.checked,s=e.target.dataset.objectId;const r=d(e).target,n=(t?r._selectedIds.add(s):r._selectedIds.delete(s),r._selectionProperty);e=r.contents.execute().filter(e=>r._selectedIds.has(e[n]));r._emit("select",r,{selection:e}),r._updateCheckboxes(r)}sortData(e){const t=d(e).target,s=B(e,"column");s&&(-1<(e=t._orderBy.findIndex(e=>e.propertyName===s))?"asc"===t._orderBy[e].direction?t._orderBy[e].direction="desc":t._orderBy.splice(e,1):t._orderBy.push({propertyName:s,direction:"asc"}),t.createHtml(),t.base.render(t))}setColumnOrder(e){this._columnOrder=e?Array.isArray(e)?e:e.split(","):[]}analyzeData(t){this.properties=new Set;var s=t.length;for(let e=0;e<s;e++)for(const r of Object.keys(t[e]))this.properties.add(r),this.uniqueEntriesByProperties[r]||(this.uniqueEntriesByProperties[r]=new Set),this.uniqueEntriesByProperties[r].add(t[e][r])}setTemplates(e){if(e)try{switch(typeof e){case"string":this._templates=JSON.parse(e)||[];break;case"object":this._templates=e}}catch(e){console.log(e)}}setContents(e){var t=e||this.contents||[];try{switch(typeof t){case"string":this.contents=JSON.parse(t)||[];break;case"object":Array.isArray(t)?this.contents=t:this.contents=[t]}}catch(e){console.log(e)}}convertJsonKeyToTitle(e){if("string"!=typeof e&&(e=e.toString()),this.propertyLabelDictionary[e])return this.propertyLabelDictionary[e];const t=e.replace(/([A-Z_])/g,e=>"_"===e?" ":" "+e.toLowerCase()).trim();var s=t.charAt(0).toUpperCase()+t.slice(1);return this.propertyLabelDictionary[e]=s}parseTemplate(e,r){return e.replace(/\{\{([\s\S]+?)\}\}/gim,(e,t)=>{let s="";t=t.trim();t=r[t];return t&&(s=t),Array.isArray(s)?s.join(", "):s.toString().trim()})}createSelectionCheckbox(e){const t=document.createElement("input");return t.setAttribute("type","checkbox"),t.classList.add("flk-selection-checkbox"),e&&(t.dataset.selected=e[this._selectionProperty]),t}createRow(e){const t=document.createElement("tr");if(this._selectionProperty.length){const n=document.createElement("td");var s=this.base.generateId();const i=this.createSelectionCheckbox(e);i.id=s,i.dataset.objectId=e[this._selectionProperty];var r=e[this._selectionProperty];this._selectedIds.has(r)?i.checked=!0:i.checked=!1,this.base.addEvent("#"+s,"change",this.emitSelect),n.append(i),t.append(n)}for(const o of this.columnOrder){const a=document.createElement("td");this._templates[o]?(a.innerHTML=this.parseTemplate(this._templates[o],e),this._templateClasses[o]&&a.classList.add(...this._templateClasses[o])):a.innerText=e[o],t.append(a)}return t}createBody(e){const t=document.createElement("tbody");for(const r of e){var s=this.createRow(r,null);t.append(s)}return t}createHead(){const e=document.createElement("thead"),t=document.createElement("tr");if(t.classList.add("cursor-pointer"),this._selectionProperty.length){const n=document.createElement("th");var s=this.base.generateId();const i=this.createSelectionCheckbox();i.id=s;var d=this.contents.execute().length;0<this._selectedIds.size&&this._selectedIds.size<d?i.indeterminate=!0:this._selectedIds.size===d&&(i.checked=!0),this.base.addEvent("#"+s,"change",this.emitSelectAll),n.append(i),t.append(n)}for(const o of this.columnOrder){var r=this.base.generateId();const a=document.createElement("th"),l=(a.id=r,a.dataset.column=o,document.createElement("span"));l.innerText=this.convertJsonKeyToTitle(o),a.append(l),this.base.addEvent("#"+r,"click",this.sortData);r=this.orderBy.find(e=>e.propertyName===o);if(r){const c=document.createElement("span");c.innerHTML="asc"===r.direction?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-narrow-wide"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M11 12h4"/><path d="M11 16h7"/><path d="M11 20h10"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-wide-narrow"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><path d="M11 4h10"/><path d="M11 8h7"/><path d="M11 12h4"/></svg>',a.append(c)}t.append(a)}return e.append(t),e}addEvent(e,t,s){this.base.addEvent(e,t,s)}init(){this.createHtml(),this.base.render(this)}}class j extends HTMLElement{base;componentId;constructor(){super(),this.base=new n}connectedCallback(){var e=this.getAttribute("top"),t=this.getAttribute("left"),s=this.getAttribute("center"),r=this.getAttribute("zIndex");this.id||(this.id=this.base.generateId()),this.style.display="block",this.style.position="fixed","string"==typeof s?(this.style.top=e||"50%",this.style.left="50%",this.style.transform="translate(-50%, -50%)"):(this.style.top=e||this.clientTop+"px",this.style.left=t||this.clientLeft+"px"),r&&(this.style.zIndex=r),this.componentId=this.getAttribute("handle");const n=document.createElement("div");n.innerHTML=this.innerHTML,this.component=n;s="#"+(this.componentId||this.id);this.base.addEvent(s,"mousedown",this._dragElement),this.base.addEvent(s,"mouseup",this._reset),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this)}_dragElement(e){const s=d(e,"flk-draggable").target;let r,n;function t(e){r=e.clientX-s.offsetLeft,n=e.clientY-s.offsetTop}function i(e){var t=e.clientX-r,e=e.clientY-n;s.style.left=t+"px",s.style.top=e+"px"}function o(e){e.preventDefault()}function a(){s.removeAttribute("draggable"),s.removeEventListener("dragstart",t),s.removeEventListener("dragend",a),document.removeEventListener("dragover",o),document.removeEventListener("drop",i)}s.setAttribute("draggable",!0),s.addEventListener("dragstart",t),s.addEventListener("dragend",a),document.addEventListener("dragover",o),document.addEventListener("drop",i)}}class M extends HTMLElement{_id;base;_draggableId;constructor(){super(),this.base=new n}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}_closeModal(e){e.stopPropagation();const t=d(e,"flk-modal").target;t.classList.add("hidden")}closeModal(e){this.classList.add("hidden")}openModal(e=!0){const t=document.getElementById(this._draggableId);e&&(t.style.top="40%",t.style.left="50%"),this.classList.remove("hidden")}connectedCallback(){this.id||(this.id=this.base.generateId());const e=document.createElement("div");var t=this.base.generateId();const s=document.createElement("flk-draggable"),r=(this._draggableId=this.base.generateId(),s.id=this._draggableId,s.setAttribute("center",""),s.setAttribute("top","40%"),s.setAttribute("handle",t),s.setAttribute("zIndex","1080"),s.classList.add("border","shadow-lg","bg-white"),s.style.width="max-content",document.createElement("div"));var n=this.getAttribute("modal-title");if(n){const c=document.createElement("span");c.innerText=n,c.classList.add("ml-1","mr-auto"),r.append(c)}r.id=t;const i=this.getAttribute("header-class");let o=[];i?o=o.concat(i.split(" ")):o.push("bg-gray-light"),r.classList.add(...o,"border-bottom","row","justify-end","cursor-no-select");n=this.base.generateId();const a=document.createElement("button"),l=(a.classList.add("py-0","px-1","outline-hover","no-border","cursor-default",...o),a.innerText="X",a.id=n,r.append(a),s.append(r),document.createElement("div"));l.innerHTML=this.innerHTML,s.append(l),e.append(s),this.component=e,this.base.addEvent("#"+n,"click",this._closeModal),this.base.render(this),this.classList.add("hidden")}disconnectedCallback(){this.base.removeEvents(this)}}class H extends HTMLElement{base;_buttonId;_drawerId;_iconId;constructor(){super(),this.base=new n}connectedCallback(){this.style.position="relative",this.style.display="flex",this.style.width="fit-content",this._buttonId=this.base.generateId();const e=document.createElement("button"),t=(e.classList.add("row"),e.id=this._buttonId,document.createElement("span")),s=(t.innerText=this.getAttribute("text"),this._iconId=this.base.generateId(),document.createElement("span"));var r=D('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>');const n=D('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up"><path d="m18 15-6-6-6 6"/></svg>'),i=(n.classList.add("hidden"),s.append(r,n),s.id=this._iconId,e.append(t,s),this._drawerId=this.base.generateId(),document.createElement("div"));i.id=this._drawerId,i.classList.add("shadow","inline-block","bg-white"),i.style.position="absolute",i.style.zIndex="1040";r=this.querySelector("template");r.innerHTML.length?i.innerHTML=r.innerHTML:i.append(r.firstChild),i.style.display="none",this.component=[e,i],this.base.addEvent("#"+this._buttonId,"click",this.toggleMenu);const o=document.querySelector("body");""!==o.getAttribute("flk-close-dropdown")&&(o.setAttribute("flk-close-dropdown",""),o.addEventListener("click",this.closeAllDropdownButtons)),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this);var e=document.querySelectorAll("flk-dropdown");if(!e||!e.length){const t=document.querySelector("body");t.removeAttribute("flk-close-dropdown"),t.removeEventListener("click",this.closeAllDropdownButtons)}}toggleMenu(e){const t=d(e).target;e=t._drawerId;const s=document.getElementById(e);var e="none"!==s.style.display,r=(s.style.display=e?"none":"block",t.getAttribute("drawer-width")),r=("string"==typeof t.getAttribute("right")&&(s.style.right="0px"),s.style.top=t.offsetHeight+"px",s.style.width=r||t.offsetWidth+"px",t._iconId);const n=document.getElementById(r);e?(n.childNodes[0].classList.remove("hidden"),n.childNodes[1].classList.add("hidden")):(n.childNodes[0].classList.add("hidden"),n.childNodes[1].classList.remove("hidden"))}_closeDropdown(){var e=this._drawerId;const t=document.getElementById(e);if("none"!==t.style.display){e=this._iconId;const s=document.getElementById(e);t.style.display="none",s.childNodes[0].classList.remove("hidden"),s.childNodes[1].classList.add("hidden")}}closeAllDropdownButtons(e){var t,s=d(e,"flk-dropdown").target,e=document.querySelectorAll("flk-dropdown");if(s)for(const r of e)s._buttonId!==r._buttonId&&(t=r._drawerId,"none"!==document.getElementById(t).style.display&&r._closeDropdown());else for(const n of e)n._closeDropdown()}}class P extends HTMLElement{base;contents;component;listType="ul";iconSet;filter={value:"",caseSensitive:!1};static get observedAttributes(){return["contents","icon-set","max-depth","filter"]}_jsonToValueArray(e){let t=JSON.stringify(e);t=t.replace(/[\[\]{}\"]/g,"");let s=[];for(const r of t.split(","))s=s.concat(r.split(":"));return[...new Set(s)]}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}constructor(){super(),this.base=new n,this.setContents(this.getAttribute("contents")),this.iconSet=this.getAttribute("icon-set")?this.getAttribute("icon-type"):"file",this.maxDepth=this.getAttribute("max-depth")?parseInt(this.getAttribute("max-depth")):-1,this.setFilter(this.getAttribute("filter")),this.style.display="block",this.style.maxWidth="fit-content",this.style.margin="0 1rem 0 0",this.base.addEvent(".flk-branch","click",this.emitNodeToggle)}emitNodeToggle(e){e.stopPropagation();const t=d(e,"flk-tree-nav").target,s=B(e,"branchKey");let r=t.contents;for(const n of s.split("."))r=r[n];e=s.substring(s.indexOf(".")+1);t._emit("tree-click",t,{path:e,data:r,branch:"object"==typeof r})}convertJsonKeyToTitle(e){const t=(e="string"!=typeof e?e.toString():e).replace(/([A-Z_])/g,e=>"_"===e?" ":" "+e).trim();return t.charAt(0).toUpperCase()+t.slice(1)}setContents(e){var t=e||this.contents||[];try{switch(typeof t){case"string":this.contents=JSON.parse(t);break;case"object":Array.isArray(t)?this.contents=t:this.contents=[t]}}catch(e){console.log(e)}}applyFilter(e){let t;var s="details"===e.tagName.toLowerCase();t=this.filter.caseSensitive?e.dataset.branchValues.includes(this.filter.value):e.dataset.branchValues.toLowerCase().includes(this.filter.value.toLowerCase()),t?e.parentElement.classList.remove("hidden"):e.parentElement.classList.add("hidden"),s&&t?e.setAttribute("open",""):e.removeAttribute("open")}resetTree(e){e.parentElement.classList.remove("hidden"),e.removeAttribute("open")}filterTree(){let t=setTimeout(()=>{for(const e of this.querySelectorAll("[data-branch-values]"))void 0===this.filter.value||0===this.filter.value.length?this.resetTree(e):this.applyFilter(e);clearTimeout(t)},10)}setFilter(e){const t=e||{};try{switch(typeof t){case"string":t.includes("{")?(this.filter=JSON.parse(t),!1===this.filter.caseSensitive&&(this.filter.value=this.filter.value.toLowerCase())):this.filter.value=e.toLowerCase();break;case"object":this.filter=t}}catch(e){console.log(e)}this.filterTree()}createTextTag(r,n){if(r.includes("(")||r.includes("[")){let e=document.createElement("div");var i=r.indexOf("("),o=r.indexOf("["),i=-1===o?i:o;let t=document.createElement("span"),s=(t.innerText=this.convertJsonKeyToTitle(r.substring(0,i)),document.createElement("small"));s.innerText=r.substring(i),s.style.marginLeft="1rem",e.append(t,s),e.style.display="inline-flex",e.style.alignItems="center",n.append(e)}else n.innerText=this.convertJsonKeyToTitle(r)}createLeaf(e,t,s,r=[]){let n=document.createElement("li");n.classList.add("cursor-no-select"),n.style.marginTop="0.4rem",n.dataset.branchKey=s;const i="file"===this.iconSet?'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>';n.style.listStyleImage=`url('data:image/svg+xml,${i}')`,n.style.position="relative",n.style.left="2px";let o=document.createElement("span");s=[e].concat(r);if(o.dataset.branchValues=[...new Set(s)].join(),this.createTextTag(e,o),o.style.position="relative",o.style.top="-3px",n.append(o),t.tagName.toLowerCase()!==this.listType){let e=document.createElement(this.listType);const i="file"===this.iconSet?v:N;e.style.listStyleImage=`url('data:image/svg+xml,${i}')`,e.append(n),t.append(e)}else t.append(n)}createBranch(s,t,r,n){if(n===this.maxDepth&&"object"==typeof s){var i=Array.isArray(s)?s:Object.keys(s);if("object"==typeof i[0])for(const e in i)for(const o of Object.keys(s[e])){var d=this._jsonToValueArray(s[e]);this.createLeaf(o,t,`${r}.${e}.`+o,d)}else for(const a of i){let e;s[a]&&(e=this._jsonToValueArray(s[a])),this.createLeaf(a,t,r,e)}}else if(Array.isArray(s))for(var h in s){var u=document.createElement(this.listType);t.append(this.createBranch(s[h],u,r+"."+h,n+1))}else if("object"==typeof s){const l=[];for(const c of Object.keys(s)){let e=document.createElement("li"),t=(e.classList.add("cursor-no-select"),e.style.position="relative",e.style.left="2px",e.dataset.branchKey=r+"."+c,document.createElement("details"));t.classList.add("flk-branch"),t.dataset.branchValues=[c].concat(this._jsonToValueArray(s[c])),t.style.position="relative",t.style.top="-3px",t.classList.add("cursor-default");var p=document.createElement("summary");this.createTextTag(c,p),t.append(p),e.append(this.createBranch(s[c],t,r+"."+c,n+1)),l.push(e)}if(t.tagName.toLowerCase()!==this.listType){let e=document.createElement(this.listType);i="file"===this.iconSet?v:N;e.style.listStyleImage=`url('data:image/svg+xml,${i}')`;for(const m of l)e.append(m);t.append(e)}else for(const f of l)t.append(f)}else this.createLeaf(s,t,r);return t}createHtml(){let e=document.createElement(this.listType);var t="file"===this.iconSet?v:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="silver" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-database"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="m 3,12 a 9,3 0 0 0 18,0 M 3,5 v 14 a 9,3 0 0 0 18,0 V 5 m 0,0 A 9,3 0 0 1 12,8 9,3 0 0 1 3,5 9,3 0 0 1 12,2 9,3 0 0 1 21,5 Z" /></svg>';if(e.style.listStyleImage=`url('data:image/svg+xml,${t}')`,e.style.marginLeft="3rem",this.contents.length){for(const s in this.contents)e=this.createBranch(this.contents[s],e,s,0);this.component=e}else this.component=e}attributeChangedCallback(e,t,s){switch(e){case"contents":this.setContents(s);break;case"icon-set":this.iconSet=s;break;case"max-depth":this.maxDepth="string"==typeof s?parseInt(s):s;break;case"filter":this.setFilter(s)}this.init()}connectedCallback(){this.init()}disconnectedCallback(){this.base.removeEvents(this)}init(){this.createHtml(),this.base.render(this)}}customElements.define("flk-table",O),customElements.define("flk-draggable",j),customElements.define("flk-modal",M),customElements.define("flk-dropdown",H),customElements.define("flk-tree-nav",P)}();
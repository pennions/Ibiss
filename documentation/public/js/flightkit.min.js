!function(){"use strict";function r(e,t){if(!t||0===t.length)return e;const s=Object.assign([],e);if(Array.isArray(s[0])){e=s;var n=t;const i=[];for(const r of e)i.push(r.sort(L(n)));i}else s.sort(L(t));return s}function E(e){let t=e.toString();e=t.match(/^\d+|\d+$/);return e?parseInt(e[0]):null}function k(e){return"boolean"==typeof e||"string"==typeof e&&("true"===(e=e.toLocaleLowerCase())||"false"===e)}function T(e){return"boolean"==typeof e?e:"true"===e.toLocaleLowerCase()}function L(w,_=0){return function(d,h){var{propertyName:e,direction:t}=w[_];let s=null===d[e]||void 0===d[e]?"":d[e],n=null===h[e]||void 0===h[e]?"":h[e];const p=/^(\d{1,4}-\d{1,4}-\d{1,4}(T)?)/gim;var m,e=s instanceof Date&&n instanceof Date||p.test(s)&&p.test(n),u=(e&&(s=s instanceof Date?s.valueOf():new Date(Date.parse(s)),n=n instanceof Date?n.valueOf():new Date(Date.parse(n))),k(s)&&k(n)),g=!u&&!isNaN(s)&&!isNaN(n),i=E(s),r=E(n);let f=!1;g?(s=parseFloat(s).toPrecision(12),n=parseFloat(n).toPrecision(12)):null!==i&&null!==r&&(f=!0),u&&(s=T(s),n=T(n));let o,a;switch(t){case"descending":case"desc":o=n,a=s;break;default:o=s,a=n}let l=0;if(f)l=(i=s,r=n,t=t,c=/^([a-zA-Z]*)(\d*)|(\d*)([a-zA-Z]*)$/,i=i.toString().toLocaleLowerCase().match(c),r=r.toString().toLocaleLowerCase().match(c),c=i[1]||i[4],i=parseInt(i[2]||i[3],10)||0,y=r[1]||r[4],r=parseInt(r[2]||r[3],10)||0,(m=(t=t.includes("desc"))?y:c)<(c=t?c:y)?-1:c<m?1:(t?r:i)-(t?i:r));else if(u||e||g)l=o-a;else{o=o.toString().trim().toLowerCase(),a=a.toString().trim().toLowerCase();const v=/\d/gim;var y=v.test(s)&&v.test(n);l=y?o.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"}):o.localeCompare(a)}var c=_+1;if(0===l&&c<w.length){const b=L(w,c);return b(d,h)}return l}}function a(e,t){t=t?t.toUpperCase():"FLK-";return e.toUpperCase().includes(t)}function p(e,t){var{timeStamp:s,type:n,x:i,y:r}=e;let o=e.target;do{if(!o||"HTML"===o.tagName||a(o.tagName,t)){"HTML"===o.tagName&&(o=null);break}}while(o=o.parentNode||o.parentElement,!a(o.tagName,t));return{target:o,timeStamp:s,type:n,x:i,y:r}}function m(e,t){let s=e.target,n="";for(;s.dataset[t]?n=s.dataset[t]:s=s.parentNode,!n;);return n}function f(e=3){var t="x".repeat(e).replace(/[x]/g,()=>(15&crypto.getRandomValues(new Uint8Array(1))[0]).toString(16));return window.$flightkitUUIDStore||(window.$flightkitUUIDStore={}),void 0!==window.$flightkitUUIDStore[t]?f(e+1):(window.$flightkitUUIDStore[t]=!0,t)}class e{constructor(){}_topLevelClasses=[];_events=[];generateId(){return"flk-"+function e(){var t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));return window.$flightkitUUIDStore||(window.$flightkitUUIDStore={}),void 0!==window.$flightkitUUIDStore[t]?e():(window.$flightkitUUIDStore[t]=!0,t)}()}render(t){if(!t.component)throw new Error("Component is not assigned! Can't render");t.id=t.id||this.generateId();var e=this._getAllEventAttributes(t);if(e){var s="#"+t.id;for(const r of e){var n="e-"+r;this.addEvent(s,r,t.getAttribute(n))}}var i=Object.keys(t.classList).length;if(i){for(let e=0;e<i;e++)this._topLevelClasses.push(t.classList[0]),t.classList.remove(t.classList[0]);t.removeAttribute("class")}this._topLevelClasses.length&&(Array.isArray(t.component)?t.component[0]:t.component).classList.add(...this._topLevelClasses),clearTimeout(this._renderTimer),this.renderTimeout=setTimeout(()=>{this._assignToDom(t,t.component),clearTimeout(this._renderTimer)},10)}addEvent(e,t,s){this._events.push({selector:e,eventType:t,callback:s})}_getExternalCallback(e){let t=void 0;for(const s of e.split("."))t=(t||window)[s];return t}_getAllEventAttributes(e){e=e.attributes;const t=Array.from(e).filter(e=>e.name.startsWith("e-"));return t.map(e=>e.name.slice(2))}_isFlightkitElement(e){return e.toUpperCase().includes("FLK-")}_outerEventHandler(e){const t=p(e),s=(t.contents=e.detail,t.target.getAttribute("e-"+t.type));let n=void 0;for(const i of s.split("."))n=(n||window)[i];return e.preventDefault(),e.stopPropagation(),n(t)}_addEvents(e){if(e.isConnected)for(const s of this._events)if(s.selector.startsWith("."))for(const n of document.querySelectorAll(s.selector))this._addEventToElement(s,n);else{var t=document.querySelector(s.selector);this._addEventToElement(s,t)}}_addEventToElement(e,t){t&&("function"==typeof e.callback?(t.removeEventListener(e.eventType,e.callback),t.addEventListener(e.eventType,e.callback)):(t.removeEventListener(e.eventType,this._outerEventHandler),t.addEventListener(e.eventType,this._outerEventHandler)))}removeEvents(){for(const t of this._events)if(t.selector.startsWith("."))for(const s of document.querySelectorAll(t.selector))this._addEventToElement(t,s);else{var e=document.querySelector(t.selector);this._addEventToElement(t,e)}this._events=[]}_removeEventToElement(e,t){t&&("function"==typeof e.callback?t.removeEventListener(e.eventType,e.callback):t.removeEventListener(e.eventType,this._outerEventHandler))}_assignToDom(e,t){e.innerHTML="";for(const n of Array.isArray(t)?t:[t])e.append(n);const s=setTimeout(()=>{this._addEvents(e),clearTimeout(s),e.dispatchEvent(new CustomEvent("loaded",{bubbles:!0,cancelable:!0}))},10)}}const y='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="gold" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>',v='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="WhiteSmoke" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sheet"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="3" x2="21" y1="15" y2="15"/><line x1="9" x2="9" y1="9" y2="21"/><line x1="15" x2="15" y1="9" y2="21"/></svg>';function l(e){const t=new DOMParser;return t.parseFromString(e,"image/svg+xml").documentElement}class t extends HTMLElement{base;component=null;properties=new Set;uniqueEntriesByProperties={};propertyLabelDictionary={};contentAnnotations={};_contents=[];_orderBy=[];_columnOrder=[];_filter="";_selectionProperty="";_selectedIds=new Set;_templates={};_templateClasses={};_hideValues=[];_hideColumn="";_page="";_itemsPerPage=0;static get observedAttributes(){return["contents","columns","order","filter","selection-property","templates","annotations","hide","pagination"]}get columnOrder(){return this._columnOrder.length?this._columnOrder:this.properties}set columnOrder(e){let t;"string"==typeof e&&(t=e.split(",")),t=e,this._columnOrder=t}get contents(){return this._contents}set contents(e){this.analyzeData(e),this._contents=e}get orderBy(){return this._orderBy}set orderBy(e){if(Array.isArray(e))this._orderBy=e;else{const n=[];for(const i of e.split(",")){var t=i.split("|"),s=t[0],t=1<t.length?t[1]:"asc";n.push({propertyName:s,direction:t})}this._orderBy=n}}get filter(){return this._filter}set filter(e){this._filter=e.toString()}constructor(){super(),this.base=new e}attributeChangedCallback(e,t,s){switch(e){case"contents":this.setContents(s);break;case"templates":this.setTemplates(s);break;case"order":this.orderBy=s;break;case"filter":this.filter=s||"";break;case"selection-property":this._selectionProperty=s;break;case"columns":this.setColumnOrder(s);break;case"annotations":this.setAnnotations(s);break;case"hide":this.setHiddenRows(s);break;case"pagination":this.setPagination(s)}this.createHtml(),this.base.render(this)}_createElement(e){const t=document.createElement(e);return t.innerHTML=this._templates[e],this._templateClasses[e]&&t.classList.add(...this._templateClasses[e]),t}createHtml(){const e=document.createElement("table");let t=this.contents;this.orderBy.length&&(t=r(this.contents,this.orderBy));var s=this.createHead();e.append(s),this._templates.caption&&e.append(this._createElement("caption"));let n=[];if(this.filter.length)for(const i of t){let e=Object.values(i).join(" ").toLowerCase();e.includes(this.filter)&&n.push(i)}else n=t;s=this.createBody(n);e.append(s),this._templates.tfoot&&e.append(this._createElement("tfoot")),this.component=e}connectedCallback(){this.setContents(this.getAttribute("contents")),this.setTemplates(this.getAttribute("templates")),this.setColumnOrder(this.getAttribute("columns")),this.filter=this.getAttribute("filter")||"",this.setAnnotations(this.getAttribute("annotations")),this.setHiddenRows(this.getAttribute("hide"));var e=this.getAttribute("order"),e=(e&&(this.orderBy=e),this.getAttribute("selection-property")),e=(e&&(this._selectionProperty=e),this.getElementsByTagName("template"));if(e.length){const s={};for(const n of e){var t=n.getAttribute("name");s[t]=n.innerHTML,n.classList.length&&(this._templateClasses[t]=[...n.classList])}this.setTemplates(s)}this.createHtml(),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this)}_updateCheckboxes(e){var t,s=e.querySelectorAll(".flk-selection-checkbox"),n=e._selectedIds.size,i=e.contents.length,r=n!==i,o=n===i,a=0!==n;for(const l of s)l.dataset.objectId?(t=l.dataset.objectId,e._selectedIds.has(t)?l.checked=!0:l.checked=!1):a&&r?l.indeterminate=!0:a&&o?(l.indeterminate=!1,l.checked=!0):(l.indeterminate=!1,l.checked=!1)}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}emitSelectAll(e){var t=e.target.checked;const s=p(e).target;s._selectedIds=t?new Set(s.contents.map(e=>e[s._selectionProperty])):new Set;e=t?s.contents:[];s._emit("select",s,{selection:e}),s._updateCheckboxes(s)}emitSelect(e){var t=e.target.checked,s=e.target.dataset.objectId;const n=p(e).target,i=(t?n._selectedIds.add(s):n._selectedIds.delete(s),n._selectionProperty);e=n.contents.filter(e=>n._selectedIds.has(e[i]));n._emit("select",n,{selection:e}),n._updateCheckboxes(n)}sortData(e){const t=p(e).target,s=m(e,"column");s&&(-1<(e=t._orderBy.findIndex(e=>e.propertyName===s))?"asc"===t._orderBy[e].direction?t._orderBy[e].direction="desc":t._orderBy.splice(e,1):t._orderBy.push({propertyName:s,direction:"asc"}),t.createHtml(),t.base.render(t))}setColumnOrder(e){this._columnOrder=e?Array.isArray(e)?e:e.split(","):[]}setPagination(e){if(e){e=e.split("|");if(this._page=parseInt(e[0]),this._itemsPerPage=parseInt(e[1]),null===this.component){let e=setTimeout(()=>{this._emit("paginate",this,{maxPages:Math.ceil(this._contents.length/this._itemsPerPage)}),clearTimeout(e)},100)}else this._emit("paginate",this,{maxPages:Math.ceil(this._contents.length/this._itemsPerPage)})}}setHiddenRows(e){if(e){const t=e.split("|");this._hideColumn=t[0],this._hideValues=t[1].split(",")}else this._hideValues=[],this._hideColumn=""}analyzeData(t){this.properties=new Set;var s=t.length;for(let e=0;e<s;e++)for(const n of Object.keys(t[e]))this.properties.add(n),this.uniqueEntriesByProperties[n]||(this.uniqueEntriesByProperties[n]=new Set),this.uniqueEntriesByProperties[n].add(t[e][n])}setTemplates(e){if(e)try{switch(typeof e){case"string":this._templates=JSON.parse(e)||[];break;case"object":this._templates=e}}catch(e){console.log(e)}}setTemplate(e,t){e&&t&&"string"==typeof t&&(this._templates[e]=t)}setContents(e){var t=e||this.contents||[];try{switch(typeof t){case"string":this.contents=JSON.parse(t)||[];break;case"object":Array.isArray(t)?this.contents=t:this.contents=[t]}}catch(e){console.log(e)}}setAnnotations(e){var t=e||this.contentAnnotations||{};try{switch(typeof t){case"string":this.contentAnnotations=JSON.parse(t)||{};break;case"object":this.contentAnnotations=t}}catch(e){console.log(e)}}getAnnotation(e,t){if(0===Object.keys(this.contentAnnotations).length)return{};if(!this.contentAnnotations[t])return{};const s=this.contentAnnotations[t];return s.hasOwnProperty(e)&&s[e]?s:{}}convertJsonKeyToTitle(e){if("string"!=typeof e&&(e=e.toString()),this.propertyLabelDictionary[e])return this.propertyLabelDictionary[e];const t=e.replace(/([A-Z_])/g,e=>"_"===e?" ":" "+e.toLowerCase()).trim();var s=t.charAt(0).toUpperCase()+t.slice(1);return this.propertyLabelDictionary[e]=s}parseTemplate(i,e,r,o){return e.replace(/\{\{([\s\S]+?)\}\}/gim,(e,t)=>{let s,n="";return"$"===(t=t.trim())[0]?s=window[t.substring(1)](i,r,o):"+"===t[0]?s=o[i]&&o[i][t.substring(1)]?o[i][t.substring(1)]:"":n=r[t].toString(),n&&(s=(o[i]&&o[i][n]?o[i][n]:n).trim()),Array.isArray(s)?s.join(", "):s.toString()})}createSelectionCheckbox(e){const t=document.createElement("input");return t.setAttribute("type","checkbox"),t.classList.add("flk-selection-checkbox"),e&&(t.dataset.selected=e[this._selectionProperty]),t}createRow(e){const t=document.createElement("tr");if(this._selectionProperty.length){const r=document.createElement("td");var s=this.base.generateId();const o=this.createSelectionCheckbox(e);o.id=s,o.dataset.objectId=e[this._selectionProperty];var d=e[this._selectionProperty];this._selectedIds.has(d)?o.checked=!0:o.checked=!1,this.base.addEvent("#"+s,"change",this.emitSelect),r.append(o),t.append(r)}for(const a of this.columnOrder){const l=this.getAnnotation(a,"body"),c=document.createElement("td");var n,i=e[a];this._templates[a]?(c.innerHTML=this.parseTemplate(a,this._templates[a],e,l),this._templateClasses[a]&&c.classList.add(...this._templateClasses[a])):l&&l.hasOwnProperty(a)?((n=l[a][i||"_"])&&n.length&&(c.title=i),c.innerText=n||i):c.innerText=i,t.append(c)}return t}createBody(e){const t=document.createElement("tbody");let s=structuredClone(e);if(0<this._itemsPerPage){let e=0,t=this._itemsPerPage;0<this._page-1&&(e=this._page*this._itemsPerPage-this._itemsPerPage,t=e+this._itemsPerPage),s=s.slice(e,t)}for(const i of s){var n;i[this._hideColumn]&&this._hideValues.includes(i[this._hideColumn].toString())||(n=this.createRow(i),t.append(n))}return t}createHead(){const e=document.createElement("thead"),t=document.createElement("tr");if(t.classList.add("cursor-pointer"),this._selectionProperty.length){const i=document.createElement("th");var s=this.base.generateId();const r=this.createSelectionCheckbox();r.id=s;var d=this.contents.length;0<this._selectedIds.size&&this._selectedIds.size<d?r.indeterminate=!0:this._selectedIds.size===d&&(r.checked=!0),this.base.addEvent("#"+s,"change",this.emitSelectAll),i.append(r),t.append(i)}for(const o of this.columnOrder){var h=this.base.generateId();const a=document.createElement("th"),l=(a.id=h,a.dataset.column=o,document.createElement("span"));var n=this.getAnnotation(o,"header"),n=(n[o]?(l.title=o,l.innerText=n[o]):l.innerText=this.convertJsonKeyToTitle(o),a.append(l),this.base.addEvent("#"+h,"click",this.sortData),this.orderBy.find(e=>e.propertyName===o));const c=document.createElement("span");n?c.innerHTML="asc"===n.direction?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-narrow-wide"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M11 12h4"/><path d="M11 16h7"/><path d="M11 20h10"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-wide-narrow"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><path d="M11 4h10"/><path d="M11 8h7"/><path d="M11 12h4"/></svg>':(c.style.display="inline-block",c.style.width="24px"),a.append(c),t.append(a)}return e.append(t),e}addEvent(e,t,s){this.base.addEvent(e,t,s)}init(){this.createHtml(),this.base.render(this)}}class s extends HTMLElement{base;componentId;constructor(){super(),this.base=new e}connectedCallback(){var e=this.getAttribute("top"),t=this.getAttribute("left"),s=this.getAttribute("center"),n=this.getAttribute("zIndex");this.id||(this.id=this.base.generateId()),this.style.display="block",this.style.position="fixed","string"==typeof s?(this.style.top=e||"50%",this.style.left="50%",this.style.transform="translate(-50%, -50%)"):(this.style.top=e||this.clientTop+"px",this.style.left=t||this.clientLeft+"px"),n&&(this.style.zIndex=n),this.componentId=this.getAttribute("handle");const i=document.createElement("div");i.innerHTML=this.innerHTML,this.component=i;s="#"+(this.componentId||this.id);this.base.addEvent(s,"mousedown",this._dragElement),this.base.addEvent(s,"mouseup",this._reset),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this)}_dragElement(e){const s=p(e,"flk-draggable").target;let n,i;function t(e){n=e.clientX-s.offsetLeft,i=e.clientY-s.offsetTop}function r(e){var t=e.clientX-n,e=e.clientY-i;s.style.left=t+"px",s.style.top=e+"px"}function o(e){e.preventDefault()}function a(){s.removeAttribute("draggable"),s.removeEventListener("dragstart",t),s.removeEventListener("dragend",a),document.removeEventListener("dragover",o),document.removeEventListener("drop",r)}s.setAttribute("draggable",!0),s.addEventListener("dragstart",t),s.addEventListener("dragend",a),document.addEventListener("dragover",o),document.addEventListener("drop",r)}}class n extends HTMLElement{_id;base;_draggableId;constructor(){super(),this.base=new e}_emit(e,t,s){e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}_closeModal(e){e.stopPropagation();const t=p(e,"flk-modal").target;t.classList.add("hidden")}closeModal(){this.classList.add("hidden")}openModal(e=!0){const t=document.getElementById(this._draggableId);e&&(t.style.top="40%",t.style.left="50%"),this.classList.remove("hidden")}connectedCallback(){this.id||(this.id=this.base.generateId());const e=document.createElement("div");var t=this.base.generateId();const s=document.createElement("flk-draggable"),n=(this._draggableId=this.base.generateId(),s.id=this._draggableId,s.setAttribute("center",""),s.setAttribute("top","40%"),s.setAttribute("handle",t),s.setAttribute("zIndex","1080"),s.classList.add("border","shadow-lg","bg-white"),s.style.width="max-content",document.createElement("div"));var i=this.getAttribute("modal-title");if(i){const c=document.createElement("span");c.innerText=i,c.classList.add("ml-1","mr-auto"),n.append(c)}n.id=t;const r=this.getAttribute("header-class");let o=[];r?o=o.concat(r.split(" ")):o.push("bg-gray-light"),n.classList.add(...o,"border-bottom","row","justify-end","cursor-no-select");i=this.base.generateId();const a=document.createElement("button"),l=(a.classList.add("py-0","px-1","outline-hover","no-border","cursor-default",...o),a.innerText="X",a.id=i,n.append(a),s.append(n),document.createElement("div"));l.innerHTML=this.innerHTML,s.append(l),e.append(s),this.component=e,this.base.addEvent("#"+i,"click",this._closeModal),this.base.render(this),this.classList.add("hidden")}disconnectedCallback(){this.base.removeEvents(this)}}class i extends HTMLElement{base;_buttonId;_drawerId;_iconId;constructor(){super(),this.base=new e}connectedCallback(){this.style.position="relative",this.style.display="flex",this.style.width="fit-content",this._buttonId=this.base.generateId();const e=document.createElement("button"),t=(e.setAttribute("type","button"),e.classList.add("row"),e.id=this._buttonId,document.createElement("span")),s=(t.classList.add("self-align-center"),t.innerText=this.getAttribute("text"),this._iconId=this.base.generateId(),document.createElement("span"));s.classList.add("self-align-center");var n=l('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>');const i=l('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up"><path d="m18 15-6-6-6 6"/></svg>'),r=(i.classList.add("hidden"),s.append(n,i),s.id=this._iconId,e.append(t,s),this._drawerId=this.base.generateId(),document.createElement("div"));r.id=this._drawerId,r.classList.add("shadow","inline-block","bg-white"),r.style.position="absolute",r.style.zIndex="1040";n=this.querySelector("template");n.innerHTML.length?r.innerHTML=n.innerHTML:r.append(n.firstChild),r.style.display="none",this.component=[e,r],this.base.addEvent("#"+this._buttonId,"click",this.toggleMenu);const o=document.querySelector("body");""!==o.getAttribute("flk-close-dropdown")&&(o.setAttribute("flk-close-dropdown",""),o.addEventListener("click",this.closeAllDropdownButtons)),this.base.render(this)}disconnectedCallback(){this.base.removeEvents(this);var e=document.querySelectorAll("flk-dropdown");if(!e||!e.length){const t=document.querySelector("body");t.removeAttribute("flk-close-dropdown"),t.removeEventListener("click",this.closeAllDropdownButtons)}}toggleMenu(e){const t=p(e).target;e=t._drawerId;const s=document.getElementById(e);var e="none"!==s.style.display,n=(s.style.display=e?"none":"block",t.getAttribute("drawer-width")),n=("string"==typeof t.getAttribute("right")&&(s.style.right="0px"),s.style.top=t.offsetHeight+"px",s.style.width=n||t.offsetWidth+"px",t._iconId);const i=document.getElementById(n);e?(i.childNodes[0].classList.remove("hidden"),i.childNodes[1].classList.add("hidden")):(i.childNodes[0].classList.add("hidden"),i.childNodes[1].classList.remove("hidden"))}_closeDropdown(){var e=this._drawerId;const t=document.getElementById(e);if("none"!==t.style.display){e=this._iconId;const s=document.getElementById(e);t.style.display="none",s.childNodes[0].classList.remove("hidden"),s.childNodes[1].classList.add("hidden")}}closeAllDropdownButtons(e){var t,s=p(e,"flk-dropdown").target,e=document.querySelectorAll("flk-dropdown");if(s)for(const n of e)s._buttonId!==n._buttonId&&(t=n._drawerId,"none"!==document.getElementById(t).style.display&&n._closeDropdown());else for(const i of e)i._closeDropdown()}}class o extends HTMLElement{base;contents;component;listType="ul";commentType="";invertComment=!1;searchStyle="";iconSet;filter={value:"",caseSensitive:!1};selectedElements=[];_setup=!0;_lastEventEmitted=0;_justFiltered=!1;_treeValues={};static get observedAttributes(){return["contents","icon-set","max-depth","filter","search-style","comment","invert-comment"]}_jsonToValueArray(e){return[...new Set(function e(t){let s=t;if(!t)return[];if("string"==typeof t&&t.includes("{"))s=JSON.parse(s);else if("object"!=typeof t)return[t];let n=[];if(Array.isArray(s)){if("object"==typeof s[0])for(const i of s){n=n.concat(Object.keys(i));for(const r of Object.values(i))"object"==typeof r?n=n.concat(e(r)):n.push(r)}}else if("object"==typeof s){n=n.concat(Object.keys(s));for(const o of Object.values(s))"object"==typeof o?n=n.concat(e(o)):n.push(o)}else n.push(s);return n}(e))]}_emit(e,t,s){s.fkTreeEvent=!0;e=new CustomEvent(e,{detail:s,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}constructor(){super(),this.base=new e}stopCollapseWhenJustFiltered(e){const t=p(e,"flk-tree-nav").target;if(!t._justFiltered)return!0;let s=e.target;for(;"DETAILS"!==s.tagName&&(s=s.parentNode||s.parentElement),"DETAILS"!==s.tagName;);!0===t._justFiltered&&s.open&&(e.preventDefault(),t._justFiltered=!1)}deselectTree(){if(this.selectedElements.length)for(const e of this.selectedElements)e.classList.remove("font-weight-bold"),delete e.dataset.selected}emitNodeToggle(e){if(["LI","UL"].includes(e.target.tagName))return!1;const t=p(e,"flk-tree-nav").target;var s=t._lastEventEmitted;if((t._lastEventEmitted=e.timeStamp,0!==s)&&e.timeStamp-s<30)return!1;const d=m(e,"branchKey");s=parseInt(m(e,"depth"));let n=t.contents;const i=d.split("¶");for(const a of i)if(n[a])n=n[a];else if(null===n[a])n=null;else if(Array.isArray(n)){let e=[];for(const l of n)l[a]&&e.push(l[a]);n=e}let r,o=e.target;for(;o.dataset&&o.dataset.leafKey?r=o.dataset.leafKey:o=o.parentNode||o.parentElement,!r;);t.selectedElements.length&&(t.deselectTree(),t.selectedElements=[]),"DETAILS"===o.tagName?(t.selectedElements.push(o.childNodes[0]),o.childNodes.length&&o.childNodes[0].childNodes.length&&"DIV"===o.childNodes[0].childNodes[0].tagName&&(t.selectedElements=o.childNodes[0].childNodes[0].childNodes)):(t.selectedElements.push(o),o.childNodes.length&&"DIV"===o.childNodes[0].tagName&&(t.selectedElements=o.childNodes[0].childNodes));for(const c of t.selectedElements)c.dataset.selected||(c.classList.add("font-weight-bold"),c.dataset.selected=!0);var e=t.createLeafText(i.reverse()[0]),h=(i.pop(),i.reverse());t._emit("tree-click",t,{depth:s,path:h,data:n,key:r,label:(e.titleText+" "+e.commentText).trim(),branch:"object"==typeof n})}convertJsonKeyToTitle(e){if(!e)return"";const t=(e="string"!=typeof e?e.toString():e).replace(/([-_])/g,e=>"_"===e?" ":e).trim();return t.charAt(0).toUpperCase()+t.slice(1)}setContents(e){var t=e||this.contents||[];try{switch(typeof t){case"string":this.contents=JSON.parse(t);break;case"object":Array.isArray(t)?this.contents=t:this.contents=[t]}}catch(e){console.log(e)}}applyFilter(e){this._justFiltered=!0;let t,s;var n="details"===e.tagName.toLowerCase();let i=structuredClone(this._treeValues[e.dataset.branchValueId]);var r=Array.isArray(i);let o=r?i.join():i,a=(r&&i.shift(),r?i.join():"");s=this.filter.caseSensitive?(t=o.includes(this.filter.value),a.includes(this.filter.value)):(t=o.toLowerCase().includes(this.filter.value.toLowerCase()),a.toLowerCase().includes(this.filter.value.toLowerCase())),t?this.unselectTree(e):"highlight"===this.searchStyle?e.parentElement.style.color="rgba(0, 0, 0, 0.5)":e.parentElement.classList.add("hidden"),n&&t&&s?e.setAttribute("open",""):e.removeAttribute("open")}resetTree(e=!0){for(const t of this.querySelectorAll("[data-branch-value-id]"))t.parentElement.style.color="",t.parentElement.classList.remove("hidden"),e&&t.removeAttribute("open")}unselectTree(e){"highlight"===this.searchStyle?e.parentElement.style.color="":e.parentElement.classList.remove("hidden"),e.removeAttribute("open")}clearFilter(){this.resetTree(!1),this.filter={value:"",caseSensitive:!1}}filterTree(){if(void 0===this.filter.value||0===this.filter.value.length)this.resetTree();else{let t=setTimeout(()=>{for(const e of this.querySelectorAll("[data-branch-value-id]"))this.applyFilter(e);clearTimeout(t)},10)}}setFilter(e){const t=e||{};try{switch(typeof t){case"string":t.includes("{")?(this.filter=JSON.parse(t),!1===this.filter.caseSensitive&&(this.filter.value=this.filter.value.toLowerCase())):this.filter.value=e.toLowerCase();break;case"object":this.filter=t}}catch(e){console.log(e)}this.filterTree()}createLeafText(e){var t;let s="",n="";return!("string"!=typeof e||!this.commentType.length)&&e.includes(this.commentType[0])?(t=e.indexOf(this.commentType[0]),s=this.convertJsonKeyToTitle(e.substring(0,t)),n=e.substring(t+1,e.length-1).trim(),this.invertComment&&(t=s,s=n,n=t)):s=this.convertJsonKeyToTitle(e),{titleText:s,commentText:n}}createTextTag(n,i){n=this.createLeafText(n);if(n.commentText){let e=document.createElement("div"),t=document.createElement("span"),s=(t.innerText=n.titleText,document.createElement("small"));s.innerText=n.commentText,s.style.marginLeft="1rem",e.append(t,s),e.style.display="inline-flex",e.style.alignItems="center",i.append(e)}else i.innerText=n.titleText;return n}createLeaf(e,t,s,n,i=[]){let r=document.createElement("li");r.classList.add("cursor-pointer"),r.style.marginTop="0.4rem",r.dataset.branchKey=s,r.dataset.depth=n;const o="file"===this.iconSet?'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>';r.style.listStyleImage=`url('data:image/svg+xml,${o}')`,r.style.position="relative",r.style.left="2px";let a=document.createElement("span");s=f(),a.dataset.branchValueId=s,n=[e].concat(i),this._treeValues[s]=[...new Set(n)].join(),a.dataset.leafKey=n[0],i=this.createTextTag(e,a);if(i.commentText?r.title=i.titleText+" "+i.commentText:r.title=i.titleText,a.style.position="relative",a.style.top="-3px",r.append(a),t.tagName.toLowerCase()!==this.listType){let e=document.createElement(this.listType);const o="file"===this.iconSet?y:v;e.style.listStyleImage=`url('data:image/svg+xml,${o}')`,e.append(r),t.append(e)}else t.append(r)}createBranch(n,t,i,r){var o=r+1;if(r===this.maxDepth&&"object"==typeof n)if(Array.isArray(n))for(const s in n){let e;if(n[s]&&(e=this._jsonToValueArray(n[s])),"object"==typeof n[s])for(const m of Object.keys(n[s]))this.createLeaf(m,t,i+"¶"+s,r,e);else this.createLeaf(n[s],t,i+"¶"+s,r,e)}else for(const l of Object.keys(n)){let e;n[l]&&(e=this._jsonToValueArray(n[l])),this.createLeaf(l,t,i+"¶"+l,r,e)}else if(Array.isArray(n))for(var e in n){var h=document.createElement(this.listType);t.append(this.createBranch(n[e],h,i+"¶"+e,o))}else if(null!==n&&"object"==typeof n){const c=[];for(const d of Object.keys(n)){let e=document.createElement("li"),t=(e.classList.add("cursor-pointer"),e.style.position="relative",e.style.left="2px",e.dataset.branchKey=i+"¶"+d,e.dataset.depth=r,document.createElement("details"));t.classList.add("flk-branch");var a=f();t.dataset.branchValueId=a,this._treeValues[a]=[d].concat(this._jsonToValueArray(n[d])),t.style.position="relative",t.style.top="-3px",t.classList.add("cursor-pointer");let s=document.createElement("summary");s.classList.add("flk-tree-summary");a=this.createTextTag(d,s);t.dataset.leafKey=d,a.commentText?t.title=a.titleText+" "+a.commentText:t.title=a.titleText,t.append(s),e.append(this.createBranch(n[d],t,i+"¶"+d,o)),c.push(e)}if(t.tagName.toLowerCase()!==this.listType){let e=document.createElement(this.listType);var p="file"===this.iconSet?y:v;e.style.listStyleImage=`url('data:image/svg+xml,${p}')`;for(const u of c)e.append(u);t.append(e)}else for(const g of c)t.append(g)}else this.createLeaf(n,t,i,r);return t}createHtml(){let e=document.createElement(this.listType);var t="file"===this.iconSet?y:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="silver" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-database"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="m 3,12 a 9,3 0 0 0 18,0 M 3,5 v 14 a 9,3 0 0 0 18,0 V 5 m 0,0 A 9,3 0 0 1 12,8 9,3 0 0 1 3,5 9,3 0 0 1 12,2 9,3 0 0 1 21,5 Z" /></svg>';if(e.style.listStyleImage=`url('data:image/svg+xml,${t}')`,e.style.marginLeft="3rem",this.contents.length){for(const s in this.contents)e=this.createBranch(this.contents[s],e,s,0);this.component=e}else this.component=e}attributeChangedCallback(e,t,s){switch(e){case"contents":this.setContents(s);break;case"icon-set":this.iconSet=s;break;case"max-depth":this.maxDepth="string"==typeof s?parseInt(s):s;break;case"comment":this.commentType=s;break;case"invert-comment":this.invertComment="boolean"==typeof s?s:"true"===s.toString().toLowerCase();break;case"search-style":this.searchStyle=s,this.resetTree(!1),this.filterTree();break;case"filter":this.setFilter(s)}["filter","search-style"].includes(e)||this._setup||this.init()}connectedCallback(){this.setContents(this.getAttribute("contents")),this.commentType=this.getAttribute("comment")??"",this.iconSet=this.getAttribute("icon-set")??"file",this.searchStyle=this.getAttribute("search-style")??"highlight",this.maxDepth=this.getAttribute("max-depth")?parseInt(this.getAttribute("max-depth")):-1,this.invertComment=!!this.getAttribute("invert-comment"),this.setFilter(this.getAttribute("filter")),this.style.display="block",this.style.maxWidth="fit-content",this.style.margin="0 1rem 0 0",this.base.addEvent(".flk-branch","click",this.emitNodeToggle),this.base.addEvent(".flk-tree-summary","click",this.stopCollapseWhenJustFiltered),this._setup||this.init()}disconnectedCallback(){this.base.removeEvents(this)}init(){this.createHtml(),this.base.render(this),this._setup=!1}}customElements.define("flk-table",t),customElements.define("flk-draggable",s),customElements.define("flk-modal",n),customElements.define("flk-dropdown",i),customElements.define("flk-tree-nav",o)}();